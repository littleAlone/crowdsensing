{"ast":null,"code":"import _toConsumableArray from \"F:/python/course/crowdsensing/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _regeneratorRuntime from \"F:/python/course/crowdsensing/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"F:/python/course/crowdsensing/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"F:/python/course/crowdsensing/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.timers.js\";\nimport SimulationCanvas from '../components/SimulationCanvas.vue';\nimport { mapState, mapGetters } from 'vuex';\nexport default {\n  name: 'SimulationDetail',\n  components: {\n    SimulationCanvas: SimulationCanvas\n  },\n  props: {\n    simulationId: {\n      type: Number,\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      simulation: {},\n      isRunning: false,\n      isCaptured: false,\n      socket: null,\n      showTrails: true,\n      showVisionRange: false,\n      showCommunicationRange: false,\n      showDeleteDialog: false,\n      deleteLoading: false,\n      // 图表配置\n      chartInitialized: false,\n      chartContainerReady: false,\n      initializationAttempts: 0,\n      maxInitializationAttempts: 10,\n      chartInstance: null,\n      chartLoading: false,\n      distanceChartOptions: {\n        chart: {\n          id: 'hunter-distance-chart',\n          type: 'line',\n          height: 180,\n          animations: {\n            enabled: false // 禁用动画提高性能\n          },\n          toolbar: {\n            show: false\n          },\n          background: '#fff',\n          fontFamily: 'Roboto, sans-serif'\n        },\n        xaxis: {\n          type: 'numeric',\n          title: {\n            text: '步数'\n          },\n          labels: {\n            formatter: function formatter(val) {\n              return Math.floor(val);\n            }\n          }\n        },\n        yaxis: {\n          title: {\n            text: '与目标距离'\n          },\n          min: function min(_min) {\n            return _min ? _min * 0.9 : 0; // 最小值向下扩展10%\n          }\n        },\n        colors: ['#3f51b5', '#673ab7', '#e91e63', '#ff9800', '#4caf50', '#03a9f4', '#8bc34a', '#9c27b0', '#795548', '#607d8b'],\n        stroke: {\n          width: 2,\n          curve: 'smooth',\n          lineCap: 'round'\n        },\n        markers: {\n          size: 0,\n          // 隐藏点标记提高性能\n          hover: {\n            size: 5\n          }\n        },\n        tooltip: {\n          x: {\n            title: {\n              formatter: function formatter() {\n                return '步数';\n              }\n            }\n          },\n          y: {\n            formatter: function formatter(val) {\n              return \"\".concat(val.toFixed(2), \" \\u5355\\u4F4D\");\n            }\n          }\n        },\n        grid: {\n          padding: {\n            left: 10,\n            right: 10\n          }\n        },\n        legend: {\n          position: 'top',\n          horizontalAlign: 'center'\n        },\n        responsive: [{\n          breakpoint: 768,\n          options: {\n            chart: {\n              height: 200\n            },\n            legend: {\n              position: 'bottom'\n            }\n          }\n        }]\n      },\n      distanceChartSeries: [],\n      agentDistances: {},\n      // WebSocket相关状态\n      wsConnectionAttempts: 0,\n      wsMaxConnectionAttempts: 5,\n      wsReconnectDelay: 2000,\n      heartbeatInterval: null,\n      heartbeatTimeout: null,\n      lastMessageTime: 0,\n      wsLatency: 0,\n      // 连接状态提示\n      showConnectionStatus: false,\n      connectionStatusText: '',\n      connectionStatusColor: 'info',\n      // 性能监控\n      renderTime: 0,\n      lastRenderTimestamp: 0,\n      // 数据处理相关\n      dataUpdateTimer: null,\n      chartUpdateTimer: null,\n      maxDataPoints: 100,\n      // 限制图表数据点数量\n      lastChartUpdate: 0,\n      optimizeChartUpdates: true\n    };\n  },\n  computed: _objectSpread(_objectSpread(_objectSpread({}, mapState({\n    storeCurrentSimulation: function storeCurrentSimulation(state) {\n      return state.currentSimulation;\n    },\n    simulationsLoading: function simulationsLoading(state) {\n      return state.loading;\n    }\n  })), mapGetters(['getSimulationById'])), {}, {\n    statusChipColor: function statusChipColor() {\n      if (this.isCaptured) return 'success';\n      if (this.isRunning) return 'primary';\n      return 'grey';\n    },\n    statusChipText: function statusChipText() {\n      if (this.isCaptured) return '已捕获';\n      if (this.isRunning) return '进行中';\n      return '已停止';\n    },\n    hasWebSocket: function hasWebSocket() {\n      return !!this.socket && this.socket.readyState === WebSocket.OPEN;\n    }\n  }),\n  created: function created() {\n    // 注册错误处理事件监听\n    this.$root.$on('api-error', this.handleApiError);\n  },\n  mounted: function mounted() {\n    console.log('SimulationDetail mounted');\n    // 监听页面可见性变化\n    document.addEventListener('visibilitychange', this.handleVisibilityChange);\n\n    // 监听窗口焦点变化\n    window.addEventListener('focus', this.handleWindowFocus);\n    window.addEventListener('blur', this.handleWindowBlur);\n\n    // 初始化组件\n    this.initializeComponent();\n  },\n  updated: function updated() {\n    var _this = this;\n    // 在组件更新后检查图表初始化\n    if (!this.chartInitialized && this.simulation.hunters && this.simulation.hunters.length) {\n      console.log('组件已更新，尝试初始化图表');\n      this.$nextTick(function () {\n        _this.checkChartContainerAndInitialize();\n      });\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    console.log('SimulationDetail beforeDestroy');\n    // 清理WebSocket连接\n    this.closeWebSocket();\n\n    // 清理定时器\n    this.cleanupTimers();\n\n    // 清理图表实例\n    if (this.chartInstance) {\n      try {\n        this.chartInstance.destroy();\n        this.chartInstance = null;\n      } catch (e) {\n        console.error('销毁图表实例时出错:', e);\n      }\n    }\n\n    // 移除事件监听\n    this.$root.$off('api-error', this.handleApiError);\n    document.removeEventListener('visibilitychange', this.handleVisibilityChange);\n    window.removeEventListener('focus', this.handleWindowFocus);\n    window.removeEventListener('blur', this.handleWindowBlur);\n  },\n  methods: {\n    initializeComponent: function initializeComponent() {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              console.log('初始化组件...');\n              _context.prev = 1;\n              _context.next = 4;\n              return _this2.fetchSimulation();\n            case 4:\n              console.log('模拟数据获取成功:', _this2.simulation.id);\n\n              // 设置WebSocket连接\n              _this2.setupWebSocket();\n\n              // 尝试初始化图表 (使用延迟确保DOM已渲染)\n              setTimeout(function () {\n                console.log('尝试初始化图表...');\n                _this2.checkChartContainerAndInitialize();\n              }, 500);\n              _context.next = 13;\n              break;\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n              console.error('初始化组件失败:', _context.t0);\n              _this2.showErrorStatus('初始化失败，请刷新页面重试');\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[1, 9]]);\n      }))();\n    },\n    // 获取模拟数据\n    fetchSimulation: function fetchSimulation() {\n      var _this3 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var storeSimulation, response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              console.log('获取模拟数据, ID:', _this3.simulationId);\n              // 尝试从store获取数据\n              storeSimulation = _this3.getSimulationById(_this3.simulationId); // 如果store中没有数据，从API获取\n              if (storeSimulation) {\n                _context2.next = 11;\n                break;\n              }\n              console.log('从API获取模拟数据');\n              _context2.next = 7;\n              return _this3.$store.dispatch('fetchSimulation', _this3.simulationId);\n            case 7:\n              response = _context2.sent;\n              _this3.simulation = response;\n              _context2.next = 13;\n              break;\n            case 11:\n              console.log('从Store获取模拟数据');\n              _this3.simulation = storeSimulation;\n            case 13:\n              // 更新状态\n              _this3.isRunning = _this3.simulation.is_running;\n              _this3.isCaptured = _this3.simulation.is_captured;\n              console.log('模拟数据获取完成:', _this3.simulation.name);\n              return _context2.abrupt(\"return\", _this3.simulation);\n            case 19:\n              _context2.prev = 19;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error('获取模拟数据失败:', _context2.t0);\n              _this3.$toast.error('获取模拟数据失败');\n              throw _context2.t0;\n            case 24:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 19]]);\n      }))();\n    },\n    // 检查图表容器并初始化\n    checkChartContainerAndInitialize: function checkChartContainerAndInitialize() {\n      var _this4 = this;\n      // 增加尝试次数\n      this.initializationAttempts++;\n      console.log(\"\\u56FE\\u8868\\u521D\\u59CB\\u5316\\u5C1D\\u8BD5 \".concat(this.initializationAttempts, \"/\").concat(this.maxInitializationAttempts));\n      console.log('DOM容器状态:', this.$refs.chartContainer ? '存在' : '不存在');\n      console.log('猎手数据状态:', this.simulation.hunters && this.simulation.hunters.length ? '已加载' : '未加载');\n\n      // 检查DOM元素和数据是否存在\n      if (this.$refs.chartContainer && this.simulation.hunters && this.simulation.hunters.length) {\n        console.log('DOM容器和数据已准备就绪，初始化图表');\n        this.chartContainerReady = true;\n        this.initDistanceChart();\n        return true;\n      } else {\n        // 如果达到最大尝试次数，放弃初始化\n        if (this.initializationAttempts >= this.maxInitializationAttempts) {\n          console.warn('达到最大初始化尝试次数，放弃初始化图表');\n          return false;\n        }\n\n        // 递增延迟时间，从500ms开始，最长到2500ms\n        var delay = Math.min(500 * Math.pow(1.5, this.initializationAttempts - 1), 2500);\n        console.log(\"\\u5C06\\u5728 \".concat(delay, \"ms \\u540E\\u91CD\\u8BD5\\u521D\\u59CB\\u5316\\u56FE\\u8868\"));\n        setTimeout(function () {\n          return _this4.checkChartContainerAndInitialize();\n        }, delay);\n        return false;\n      }\n    },\n    // 初始化图表\n    initDistanceChart: function initDistanceChart() {\n      var _this5 = this;\n      try {\n        console.log('开始初始化图表');\n        this.chartLoading = true;\n\n        // 清空旧数据\n        this.distanceChartSeries = [];\n        this.agentDistances = {};\n\n        // 为每个猎手创建数据系列\n        if (this.simulation.hunters && this.simulation.hunters.length > 0) {\n          console.log(\"\\u521B\\u5EFA \".concat(this.simulation.hunters.length, \" \\u4E2A\\u730E\\u624B\\u7684\\u6570\\u636E\\u7CFB\\u5217\"));\n          this.distanceChartSeries = this.simulation.hunters.map(function (hunter) {\n            return {\n              name: \"\\u730E\\u624B \".concat(hunter.id),\n              data: []\n            };\n          });\n          this.simulation.hunters.forEach(function (hunter) {\n            _this5.agentDistances[hunter.id] = [];\n          });\n\n          // 使用nextTick确保DOM已更新\n          this.$nextTick(function () {\n            setTimeout(function () {\n              try {\n                // 确保没有现有图表实例\n                if (_this5.chartInstance) {\n                  _this5.chartInstance.destroy();\n                  _this5.chartInstance = null;\n                }\n\n                // 确保容器存在\n                var container = document.getElementById('hunter-distance-chart');\n                if (!container) {\n                  console.error('找不到图表容器元素');\n                  return;\n                }\n\n                // 使用普通方式创建图表而不是Vue组件\n                import('apexcharts').then(function (ApexCharts) {\n                  _this5.chartInstance = new ApexCharts[\"default\"](container, _objectSpread(_objectSpread({}, _this5.distanceChartOptions), {}, {\n                    series: _this5.distanceChartSeries\n                  }));\n                  _this5.chartInstance.render().then(function () {\n                    console.log('图表渲染成功');\n                    _this5.chartInitialized = true;\n                    _this5.chartLoading = false;\n                  })[\"catch\"](function (err) {\n                    console.error('图表渲染失败:', err);\n                    _this5.chartLoading = false;\n                  });\n                })[\"catch\"](function (err) {\n                  console.error('加载ApexCharts库失败:', err);\n                  _this5.chartLoading = false;\n                });\n              } catch (error) {\n                console.error('创建图表实例失败:', error);\n                _this5.chartLoading = false;\n              }\n            }, 500); // 延迟500ms确保DOM完全就绪\n          });\n        } else {\n          console.warn('没有猎手数据，跳过图表初始化');\n          this.chartLoading = false;\n        }\n      } catch (error) {\n        console.error('图表初始化主流程失败:', error);\n        this.chartLoading = false;\n        this.chartInitialized = false;\n      }\n    },\n    // WebSocket连接管理\n    setupWebSocket: function setupWebSocket() {\n      var _this6 = this;\n      // 关闭之前的连接\n      this.closeWebSocket();\n\n      // 添加连接状态跟踪\n      this.wsConnectionAttempts = 0;\n      this.wsMaxConnectionAttempts = 5;\n      this.wsReconnectDelay = 2000; // 初始重连延迟（毫秒）\n\n      // 创建新的WebSocket连接\n      var wsProtocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n      var wsBaseUrl = \"\".concat(wsProtocol, \"//localhost:8000\");\n      var wsUrl = \"\".concat(wsBaseUrl, \"/api/v1/ws/simulations/\").concat(this.simulationId);\n      console.log(\"\\u8FDE\\u63A5WebSocket: \".concat(wsUrl));\n      this.socket = new WebSocket(wsUrl);\n      this.socket.onopen = function () {\n        console.log(\"WebSocket\\u8FDE\\u63A5\\u5DF2\\u5EFA\\u7ACB (simulationId: \".concat(_this6.simulationId, \")\"));\n        // 重置重连计数器\n        _this6.wsConnectionAttempts = 0;\n        _this6.wsReconnectDelay = 2000;\n        // 显示连接成功提示\n        _this6.showSuccessStatus('WebSocket连接已建立');\n        // 添加心跳检测\n        _this6.startHeartbeat();\n      };\n      this.socket.onmessage = function (event) {\n        // 计算延迟\n        _this6.calculateWsLatency();\n        try {\n          var data = JSON.parse(event.data);\n          if (data.error) {\n            console.error('WebSocket错误:', data.error);\n            _this6.$toast.error(\"WebSocket\\u9519\\u8BEF: \".concat(data.error));\n            return;\n          }\n\n          // 使用防抖更新数据，避免频繁更新\n          _this6.updateSimulationDataDebounced(data);\n\n          // 如果是心跳响应，重置超时计时器\n          if (data.heartbeat) {\n            _this6.resetHeartbeatTimeout();\n          }\n        } catch (error) {\n          console.error('解析WebSocket消息失败:', error);\n        }\n      };\n      this.socket.onclose = function (event) {\n        console.log(\"WebSocket\\u8FDE\\u63A5\\u5DF2\\u5173\\u95ED (code: \".concat(event.code, \", reason: \").concat(event.reason, \")\"));\n        // 清理心跳计时器\n        _this6.stopHeartbeat();\n\n        // 如果是正常关闭，不显示错误\n        if (event.code === 1000 || event.code === 1001) {\n          return;\n        }\n\n        // 显示连接关闭提示\n        _this6.showWarningStatus('WebSocket连接已关闭');\n\n        // 如果模拟仍在运行但连接关闭，尝试重新连接\n        if (_this6.isRunning && !_this6.isCaptured && _this6.wsConnectionAttempts < _this6.wsMaxConnectionAttempts) {\n          // 指数退避重连策略\n          _this6.wsConnectionAttempts++;\n          var delay = Math.min(_this6.wsReconnectDelay * Math.pow(1.5, _this6.wsConnectionAttempts - 1), 30000);\n          console.log(\"\\u5C1D\\u8BD5\\u91CD\\u65B0\\u8FDE\\u63A5WebSocket... (\".concat(_this6.wsConnectionAttempts, \"/\").concat(_this6.wsMaxConnectionAttempts, \") \\u5EF6\\u8FDF: \").concat(delay, \"ms\"));\n          _this6.showInfoStatus(\"\\u6B63\\u5728\\u91CD\\u65B0\\u8FDE\\u63A5... (\".concat(_this6.wsConnectionAttempts, \"/\").concat(_this6.wsMaxConnectionAttempts, \")\"));\n          setTimeout(function () {\n            return _this6.setupWebSocket();\n          }, delay);\n        } else if (_this6.wsConnectionAttempts >= _this6.wsMaxConnectionAttempts) {\n          console.error('达到最大重连次数，停止尝试');\n          _this6.showErrorStatus('WebSocket连接失败，请刷新页面重试');\n        }\n      };\n      this.socket.onerror = function (error) {\n        console.error('WebSocket错误:', error);\n        _this6.showErrorStatus('WebSocket连接错误');\n      };\n    },\n    // 关闭WebSocket连接\n    closeWebSocket: function closeWebSocket() {\n      this.stopHeartbeat();\n      if (this.socket) {\n        // 移除所有事件监听器\n        this.socket.onopen = null;\n        this.socket.onmessage = null;\n        this.socket.onclose = null;\n        this.socket.onerror = null;\n\n        // 关闭连接\n        if (this.socket.readyState === WebSocket.OPEN || this.socket.readyState === WebSocket.CONNECTING) {\n          this.socket.close();\n        }\n        this.socket = null;\n      }\n    },\n    // 开始发送心跳\n    startHeartbeat: function startHeartbeat() {\n      var _this7 = this;\n      this.heartbeatInterval = setInterval(function () {\n        if (_this7.socket && _this7.socket.readyState === WebSocket.OPEN) {\n          // 发送心跳消息\n          _this7.socket.send(JSON.stringify({\n            type: 'heartbeat'\n          }));\n\n          // 设置心跳超时，如果超时没收到响应则重连\n          _this7.heartbeatTimeout = setTimeout(function () {\n            console.warn('心跳超时，尝试重新连接...');\n            _this7.closeWebSocket();\n            _this7.setupWebSocket();\n          }, 5000); // 5秒超时\n        }\n      }, 30000); // 每30秒发送一次心跳\n    },\n    // 停止心跳\n    stopHeartbeat: function stopHeartbeat() {\n      if (this.heartbeatInterval) {\n        clearInterval(this.heartbeatInterval);\n        this.heartbeatInterval = null;\n      }\n      if (this.heartbeatTimeout) {\n        clearTimeout(this.heartbeatTimeout);\n        this.heartbeatTimeout = null;\n      }\n    },\n    // 重置心跳超时\n    resetHeartbeatTimeout: function resetHeartbeatTimeout() {\n      if (this.heartbeatTimeout) {\n        clearTimeout(this.heartbeatTimeout);\n        this.heartbeatTimeout = null;\n      }\n    },\n    // 计算WebSocket延迟\n    calculateWsLatency: function calculateWsLatency() {\n      var now = performance.now();\n      if (this.lastMessageTime) {\n        this.wsLatency = Math.round(now - this.lastMessageTime);\n      }\n      this.lastMessageTime = now;\n    },\n    // 防抖更新数据\n    updateSimulationDataDebounced: function updateSimulationDataDebounced(data) {\n      var _this8 = this;\n      if (this.dataUpdateTimer) {\n        clearTimeout(this.dataUpdateTimer);\n      }\n      this.dataUpdateTimer = setTimeout(function () {\n        var startTime = performance.now();\n\n        // 更新模拟数据\n        _this8.simulation = data;\n        _this8.isRunning = data.is_running;\n        _this8.isCaptured = data.is_captured;\n\n        // 更新Vuex存储\n        _this8.$store.dispatch('updateSimulationAgents', {\n          simulationId: _this8.simulationId,\n          hunters: data.hunters || [],\n          targets: data.targets || []\n        });\n\n        // 使用nextTick确保视图更新后再更新图表\n        _this8.$nextTick(function () {\n          // 更新图表（使用节流）\n          if (_this8.chartInitialized && _this8.chartInstance) {\n            _this8.updateChartThrottled();\n          } else if (!_this8.chartInitialized && _this8.$refs.chartContainer) {\n            // 如果图表尚未初始化但DOM元素已存在，尝试初始化\n            _this8.checkChartContainerAndInitialize();\n          }\n\n          // 计算渲染时间\n          _this8.renderTime = Math.round(performance.now() - startTime);\n        });\n      }, 50); // 50ms防抖延迟\n    },\n    // 节流更新图表\n    updateChartThrottled: function updateChartThrottled() {\n      var _this9 = this;\n      var now = performance.now();\n      var timeSinceLastUpdate = now - this.lastChartUpdate;\n\n      // 如果数据是实时的并且距离上次更新不到200ms，延迟更新\n      if (this.optimizeChartUpdates && this.isRunning && timeSinceLastUpdate < 200) {\n        if (!this.chartUpdateTimer) {\n          this.chartUpdateTimer = setTimeout(function () {\n            _this9.updateDistanceChart();\n            _this9.chartUpdateTimer = null;\n            _this9.lastChartUpdate = performance.now();\n          }, 200 - timeSinceLastUpdate);\n        }\n      } else {\n        // 直接更新\n        if (this.chartUpdateTimer) {\n          clearTimeout(this.chartUpdateTimer);\n          this.chartUpdateTimer = null;\n        }\n        this.updateDistanceChart();\n        this.lastChartUpdate = now;\n      }\n    },\n    // 更新图表\n    updateDistanceChart: function updateDistanceChart() {\n      var _this10 = this;\n      try {\n        if (!this.chartInitialized || !this.chartInstance || !this.simulation.hunters || !this.simulation.targets || !this.simulation.targets.length) {\n          return;\n        }\n        var target = this.simulation.targets[0];\n        if (!target || !target.position) return;\n\n        // 更新数据\n        var dataUpdated = false;\n        this.simulation.hunters.forEach(function (hunter, index) {\n          // 确保猎手数据有效\n          if (!hunter || !hunter.position) return;\n\n          // 计算与目标的距离\n          var distance = _this10.calculateDistance(hunter.position, target.position);\n          if (!_this10.agentDistances[hunter.id]) {\n            _this10.agentDistances[hunter.id] = [];\n          }\n\n          // 添加数据点\n          _this10.agentDistances[hunter.id].push({\n            x: _this10.simulation.step_count,\n            y: Math.round(distance * 100) / 100\n          });\n\n          // 限制数据点数量，避免性能问题\n          if (_this10.agentDistances[hunter.id].length > _this10.maxDataPoints) {\n            // 清除旧数据点，但保留第一个点以保持连续性\n            var firstPoint = _this10.agentDistances[hunter.id][0];\n            _this10.agentDistances[hunter.id] = [firstPoint].concat(_toConsumableArray(_this10.agentDistances[hunter.id].slice(-_this10.maxDataPoints + 1)));\n          }\n\n          // 更新系列数据\n          if (index < _this10.distanceChartSeries.length) {\n            _this10.distanceChartSeries[index].data = _toConsumableArray(_this10.agentDistances[hunter.id]);\n            dataUpdated = true;\n          }\n        });\n\n        // 仅当数据更新时才更新图表\n        if (dataUpdated && this.chartInstance) {\n          // 使用ApexCharts的updateSeries方法更新数据\n          this.chartInstance.updateSeries(this.distanceChartSeries);\n        }\n      } catch (error) {\n        console.error('更新图表数据失败:', error);\n      }\n    },\n    // 模拟控制方法\n    startSimulation: function startSimulation() {\n      var _this11 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return _this11.$store.dispatch('startSimulation', _this11.simulationId);\n            case 3:\n              _this11.isRunning = true;\n              _this11.$toast.success('模拟已启动');\n              _context3.next = 11;\n              break;\n            case 7:\n              _context3.prev = 7;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.error('启动模拟失败:', _context3.t0);\n              _this11.$toast.error('启动模拟失败');\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[0, 7]]);\n      }))();\n    },\n    stopSimulation: function stopSimulation() {\n      var _this12 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return _this12.$store.dispatch('stopSimulation', _this12.simulationId);\n            case 3:\n              _this12.isRunning = false;\n              _this12.$toast.success('模拟已停止');\n              _context4.next = 11;\n              break;\n            case 7:\n              _context4.prev = 7;\n              _context4.t0 = _context4[\"catch\"](0);\n              console.error('停止模拟失败:', _context4.t0);\n              _this12.$toast.error('停止模拟失败');\n            case 11:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, null, [[0, 7]]);\n      }))();\n    },\n    resetSimulation: function resetSimulation() {\n      var _this13 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var data;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              _context5.next = 3;\n              return _this13.$store.dispatch('resetSimulation', _this13.simulationId);\n            case 3:\n              data = _context5.sent;\n              _this13.simulation = data;\n              _this13.isRunning = false;\n              _this13.isCaptured = false;\n\n              // 重置图表数据\n              _this13.agentDistances = {};\n              _this13.chartInitialized = false; // 标记需要重新初始化\n              _this13.initializationAttempts = 0;\n\n              // 清理现有图表实例\n              if (_this13.chartInstance) {\n                try {\n                  _this13.chartInstance.destroy();\n                  _this13.chartInstance = null;\n                } catch (e) {\n                  console.error('重置时销毁图表实例失败:', e);\n                }\n              }\n              _this13.$nextTick(function () {\n                _this13.checkChartContainerAndInitialize();\n              });\n              _this13.$toast.success('模拟已重置');\n              _context5.next = 19;\n              break;\n            case 15:\n              _context5.prev = 15;\n              _context5.t0 = _context5[\"catch\"](0);\n              console.error('重置模拟失败:', _context5.t0);\n              _this13.$toast.error('重置模拟失败');\n            case 19:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, null, [[0, 15]]);\n      }))();\n    },\n    deleteSimulation: function deleteSimulation() {\n      var _this14 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              _this14.deleteLoading = true;\n              _context6.prev = 1;\n              _context6.next = 4;\n              return _this14.$store.dispatch('deleteSimulation', _this14.simulationId);\n            case 4:\n              _this14.$toast.success('模拟已删除');\n              _this14.$router.push('/simulations');\n              _context6.next = 12;\n              break;\n            case 8:\n              _context6.prev = 8;\n              _context6.t0 = _context6[\"catch\"](1);\n              console.error('删除模拟失败:', _context6.t0);\n              _this14.$toast.error('删除模拟失败');\n            case 12:\n              _context6.prev = 12;\n              _this14.deleteLoading = false;\n              _this14.showDeleteDialog = false;\n              return _context6.finish(12);\n            case 16:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, null, [[1, 8, 12, 16]]);\n      }))();\n    },\n    // 辅助方法\n    calculateDistance: function calculateDistance(pos1, pos2) {\n      return Math.sqrt(Math.pow(pos1[0] - pos2[0], 2) + Math.pow(pos1[1] - pos2[1], 2));\n    },\n    formatDate: function formatDate(dateString) {\n      if (!dateString) return '未知';\n      var date = new Date(dateString);\n      return date.toLocaleString();\n    },\n    formatAlgorithm: function formatAlgorithm(algorithm) {\n      var map = {\n        'APF': '人工势场法',\n        'CONSENSUS': '共识算法'\n      };\n      return map[algorithm] || algorithm;\n    },\n    // 导航方法\n    navigateToList: function navigateToList() {\n      // 清理资源后再导航\n      this.closeWebSocket();\n      this.cleanupTimers();\n      this.$router.push('/simulations');\n    },\n    // 状态提示显示方法\n    showInfoStatus: function showInfoStatus(message) {\n      this.connectionStatusText = message;\n      this.connectionStatusColor = 'info';\n      this.showConnectionStatus = true;\n    },\n    showSuccessStatus: function showSuccessStatus(message) {\n      this.connectionStatusText = message;\n      this.connectionStatusColor = 'success';\n      this.showConnectionStatus = true;\n    },\n    showWarningStatus: function showWarningStatus(message) {\n      this.connectionStatusText = message;\n      this.connectionStatusColor = 'warning';\n      this.showConnectionStatus = true;\n    },\n    showErrorStatus: function showErrorStatus(message) {\n      this.connectionStatusText = message;\n      this.connectionStatusColor = 'error';\n      this.showConnectionStatus = true;\n    },\n    // 错误处理\n    handleApiError: function handleApiError(error) {\n      console.error('API错误:', error);\n\n      // 特定错误处理\n      if (error.status === 404 && error.message.includes('Simulation not found')) {\n        this.$toast.error('模拟不存在或已被删除');\n        this.$router.push('/simulations');\n      }\n    },\n    // 页面可见性处理\n    handleVisibilityChange: function handleVisibilityChange() {\n      if (document.hidden) {\n        // 页面隐藏时暂停WebSocket\n        this.stopHeartbeat();\n      } else {\n        // 页面可见时恢复WebSocket\n        if (this.socket && this.socket.readyState === WebSocket.OPEN) {\n          this.startHeartbeat();\n        } else if (this.isRunning && !this.isCaptured) {\n          // 如果模拟正在运行，但WebSocket关闭，则重新连接\n          this.setupWebSocket();\n        }\n      }\n    },\n    // 窗口焦点变化处理\n    handleWindowFocus: function handleWindowFocus() {\n      if (this.isRunning && !this.isCaptured) {\n        // 如果模拟正在运行，确保WebSocket连接正常\n        if (!this.socket || this.socket.readyState !== WebSocket.OPEN) {\n          this.setupWebSocket();\n        }\n      }\n    },\n    handleWindowBlur: function handleWindowBlur() {\n      // 窗口失去焦点时的处理（如果需要）\n      // 可以降低更新频率等\n      this.optimizeChartUpdates = true;\n    },\n    // 清理定时器\n    cleanupTimers: function cleanupTimers() {\n      if (this.dataUpdateTimer) {\n        clearTimeout(this.dataUpdateTimer);\n        this.dataUpdateTimer = null;\n      }\n      if (this.chartUpdateTimer) {\n        clearTimeout(this.chartUpdateTimer);\n        this.chartUpdateTimer = null;\n      }\n    }\n  },\n  watch: {\n    simulationId: {\n      handler: function handler(newId, oldId) {\n        if (newId !== oldId) {\n          console.log(\"\\u6A21\\u62DFID\\u53D8\\u66F4: \".concat(oldId, \" -> \").concat(newId));\n          // 重新初始化组件\n          this.closeWebSocket();\n          this.cleanupTimers();\n          this.chartInitialized = false;\n          this.initializationAttempts = 0;\n\n          // 清理现有图表实例\n          if (this.chartInstance) {\n            try {\n              this.chartInstance.destroy();\n              this.chartInstance = null;\n            } catch (e) {\n              console.error('ID变更时销毁图表实例失败:', e);\n            }\n          }\n          this.initializeComponent();\n        }\n      },\n      immediate: false\n    },\n    // 监视store中的当前模拟数据变化\n    storeCurrentSimulation: {\n      handler: function handler(newSimulation) {\n        if (newSimulation && newSimulation.id === this.simulationId) {\n          // 仅在首次加载或重要属性变化时更新本地数据\n          if (!this.simulation.id || newSimulation.is_running !== this.simulation.is_running || newSimulation.is_captured !== this.simulation.is_captured) {\n            this.simulation = newSimulation;\n            this.isRunning = newSimulation.is_running;\n            this.isCaptured = newSimulation.is_captured;\n          }\n        }\n      },\n      deep: true\n    }\n  }\n};","map":{"version":3,"names":["SimulationCanvas","mapState","mapGetters","name","components","props","simulationId","type","Number","required","data","simulation","isRunning","isCaptured","socket","showTrails","showVisionRange","showCommunicationRange","showDeleteDialog","deleteLoading","chartInitialized","chartContainerReady","initializationAttempts","maxInitializationAttempts","chartInstance","chartLoading","distanceChartOptions","chart","id","height","animations","enabled","toolbar","show","background","fontFamily","xaxis","title","text","labels","formatter","val","Math","floor","yaxis","min","colors","stroke","width","curve","lineCap","markers","size","hover","tooltip","x","y","concat","toFixed","grid","padding","left","right","legend","position","horizontalAlign","responsive","breakpoint","options","distanceChartSeries","agentDistances","wsConnectionAttempts","wsMaxConnectionAttempts","wsReconnectDelay","heartbeatInterval","heartbeatTimeout","lastMessageTime","wsLatency","showConnectionStatus","connectionStatusText","connectionStatusColor","renderTime","lastRenderTimestamp","dataUpdateTimer","chartUpdateTimer","maxDataPoints","lastChartUpdate","optimizeChartUpdates","computed","_objectSpread","storeCurrentSimulation","state","currentSimulation","simulationsLoading","loading","statusChipColor","statusChipText","hasWebSocket","readyState","WebSocket","OPEN","created","$root","$on","handleApiError","mounted","console","log","document","addEventListener","handleVisibilityChange","window","handleWindowFocus","handleWindowBlur","initializeComponent","updated","_this","hunters","length","$nextTick","checkChartContainerAndInitialize","beforeDestroy","closeWebSocket","cleanupTimers","destroy","e","error","$off","removeEventListener","methods","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","fetchSimulation","setupWebSocket","setTimeout","t0","showErrorStatus","stop","_this3","_callee2","storeSimulation","response","_callee2$","_context2","getSimulationById","$store","dispatch","sent","is_running","is_captured","abrupt","$toast","_this4","$refs","chartContainer","initDistanceChart","warn","delay","pow","_this5","map","hunter","forEach","container","getElementById","then","ApexCharts","series","render","err","_this6","wsProtocol","location","protocol","wsBaseUrl","wsUrl","onopen","showSuccessStatus","startHeartbeat","onmessage","event","calculateWsLatency","JSON","parse","updateSimulationDataDebounced","heartbeat","resetHeartbeatTimeout","onclose","code","reason","stopHeartbeat","showWarningStatus","showInfoStatus","onerror","CONNECTING","close","_this7","setInterval","send","stringify","clearInterval","clearTimeout","now","performance","round","_this8","startTime","targets","updateChartThrottled","_this9","timeSinceLastUpdate","updateDistanceChart","_this10","target","dataUpdated","index","distance","calculateDistance","push","step_count","firstPoint","_toConsumableArray","slice","updateSeries","startSimulation","_this11","_callee3","_callee3$","_context3","success","stopSimulation","_this12","_callee4","_callee4$","_context4","resetSimulation","_this13","_callee5","_callee5$","_context5","deleteSimulation","_this14","_callee6","_callee6$","_context6","$router","finish","pos1","pos2","sqrt","formatDate","dateString","date","Date","toLocaleString","formatAlgorithm","algorithm","navigateToList","message","status","includes","hidden","watch","handler","newId","oldId","immediate","newSimulation","deep"],"sources":["src/views/SimulationDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"simulation-detail\">\r\n    <v-container>\r\n      <v-row>\r\n        <v-col cols=\"12\">\r\n          <v-card>\r\n            <v-card-title class=\"headline\">\r\n              {{ simulation.name }}\r\n              <v-spacer></v-spacer>\r\n              <v-chip\r\n                :color=\"statusChipColor\"\r\n                text-color=\"white\"\r\n                small\r\n              >\r\n                {{ statusChipText }}\r\n              </v-chip>\r\n            </v-card-title>\r\n            <v-card-subtitle>{{ simulation.description }}</v-card-subtitle>\r\n            \r\n            <v-card-text>\r\n              <v-row>\r\n                <v-col cols=\"12\" md=\"8\">\r\n                  <simulation-canvas\r\n                    :hunters=\"simulation.hunters || []\"\r\n                    :targets=\"simulation.targets || []\"\r\n                    :environment-size=\"simulation.environment_size || 500\"\r\n                    :is-running=\"isRunning\"\r\n                    :is-captured=\"isCaptured\"\r\n                    :show-trails=\"showTrails\"\r\n                    :show-vision-range=\"showVisionRange\"\r\n                    :show-communication-range=\"showCommunicationRange\"\r\n                    @start=\"startSimulation\"\r\n                    @stop=\"stopSimulation\"\r\n                    @reset=\"resetSimulation\"\r\n                  ></simulation-canvas>\r\n                  \r\n                  <v-card class=\"mt-4\">\r\n                    <v-card-title>显示选项</v-card-title>\r\n                    <v-card-text>\r\n                      <v-row>\r\n                        <v-col cols=\"12\" sm=\"4\">\r\n                          <v-switch\r\n                            v-model=\"showTrails\"\r\n                            label=\"显示轨迹\"\r\n                            color=\"primary\"\r\n                            hide-details\r\n                            class=\"ma-2\"\r\n                          ></v-switch>\r\n                        </v-col>\r\n                        <v-col cols=\"12\" sm=\"4\">\r\n                          <v-switch\r\n                            v-model=\"showVisionRange\"\r\n                            label=\"显示视野范围\"\r\n                            color=\"primary\"\r\n                            hide-details\r\n                            class=\"ma-2\"\r\n                          ></v-switch>\r\n                        </v-col>\r\n                        <v-col cols=\"12\" sm=\"4\">\r\n                          <v-switch\r\n                            v-model=\"showCommunicationRange\"\r\n                            label=\"显示通信范围\"\r\n                            color=\"primary\"\r\n                            hide-details\r\n                            class=\"ma-2\"\r\n                          ></v-switch>\r\n                        </v-col>\r\n                      </v-row>\r\n                    </v-card-text>\r\n                  </v-card>\r\n                </v-col>\r\n                \r\n                <v-col cols=\"12\" md=\"4\">\r\n                  <v-card>\r\n                    <v-card-title>模拟信息</v-card-title>\r\n                    <v-list dense>\r\n                      <v-list-item>\r\n                        <v-list-item-content>\r\n                          <v-list-item-subtitle>算法类型</v-list-item-subtitle>\r\n                          <v-list-item-title>{{ formatAlgorithm(simulation.algorithm_type) }}</v-list-item-title>\r\n                        </v-list-item-content>\r\n                      </v-list-item>\r\n                      \r\n                      <v-list-item>\r\n                        <v-list-item-content>\r\n                          <v-list-item-subtitle>猎手数量</v-list-item-subtitle>\r\n                          <v-list-item-title>{{ simulation.hunters ? simulation.hunters.length : 0 }}</v-list-item-title>\r\n                        </v-list-item-content>\r\n                      </v-list-item>\r\n                      \r\n                      <v-list-item>\r\n                        <v-list-item-content>\r\n                          <v-list-item-subtitle>目标数量</v-list-item-subtitle>\r\n                          <v-list-item-title>{{ simulation.targets ? simulation.targets.length : 0 }}</v-list-item-title>\r\n                        </v-list-item-content>\r\n                      </v-list-item>\r\n                      \r\n                      <v-list-item>\r\n                        <v-list-item-content>\r\n                          <v-list-item-subtitle>环境大小</v-list-item-subtitle>\r\n                          <v-list-item-title>{{ simulation.environment_size || 500 }} x {{ simulation.environment_size || 500 }}</v-list-item-title>\r\n                        </v-list-item-content>\r\n                      </v-list-item>\r\n                      \r\n                      <v-list-item>\r\n                        <v-list-item-content>\r\n                          <v-list-item-subtitle>当前步数</v-list-item-subtitle>\r\n                          <v-list-item-title>{{ simulation.step_count || 0 }}</v-list-item-title>\r\n                        </v-list-item-content>\r\n                      </v-list-item>\r\n                      \r\n                      <v-list-item v-if=\"simulation.is_captured\">\r\n                        <v-list-item-content>\r\n                          <v-list-item-subtitle>捕获时间</v-list-item-subtitle>\r\n                          <v-list-item-title>{{ simulation.capture_time ? simulation.capture_time.toFixed(2) + ' 秒' : '未知' }}</v-list-item-title>\r\n                        </v-list-item-content>\r\n                      </v-list-item>\r\n                      \r\n                      <v-list-item>\r\n                        <v-list-item-content>\r\n                          <v-list-item-subtitle>创建时间</v-list-item-subtitle>\r\n                          <v-list-item-title>{{ formatDate(simulation.created_at) }}</v-list-item-title>\r\n                        </v-list-item-content>\r\n                      </v-list-item>\r\n                    </v-list>\r\n                  </v-card>\r\n                  \r\n                  <v-card class=\"mt-2\">\r\n                    <v-card-title class=\"py-2\">猎手统计</v-card-title>\r\n                    <v-card-text class=\"pa-1\">\r\n                      <!-- 修改图表容器，使用固定ID -->\r\n                      <div id=\"hunter-distance-chart\" ref=\"chartContainer\" class=\"chart-container\">\r\n                        <div v-if=\"!chartInitialized || chartLoading\" class=\"chart-placeholder\">\r\n                          正在加载图表...\r\n                        </div>\r\n                      </div>\r\n                    </v-card-text>\r\n                  </v-card>\r\n                  \r\n                  <v-card class=\"mt-4\" v-if=\"simulation.step_count > 0\">\r\n                    <v-card-title>性能监控</v-card-title>\r\n                    <v-card-text>\r\n                      <v-row>\r\n                        <v-col cols=\"6\">\r\n                          <div class=\"text-subtitle-2\">渲染时间</div>\r\n                          <div>{{ renderTime }} ms</div>\r\n                        </v-col>\r\n                        <v-col cols=\"6\">\r\n                          <div class=\"text-subtitle-2\">WebSocket延迟</div>\r\n                          <div>{{ wsLatency }} ms</div>\r\n                        </v-col>\r\n                      </v-row>\r\n                    </v-card-text>\r\n                  </v-card>\r\n                </v-col>\r\n              </v-row>\r\n            </v-card-text>\r\n            \r\n            <v-card-actions>\r\n              <v-btn text color=\"primary\" @click=\"navigateToList\">\r\n                <v-icon left>mdi-arrow-left</v-icon> 返回列表\r\n              </v-btn>\r\n              <v-spacer></v-spacer>\r\n              <v-btn text color=\"error\" @click=\"showDeleteDialog = true\">\r\n                <v-icon left>mdi-delete</v-icon> 删除模拟\r\n              </v-btn>\r\n            </v-card-actions>\r\n          </v-card>\r\n        </v-col>\r\n      </v-row>\r\n    </v-container>\r\n    \r\n    <!-- 删除确认对话框 -->\r\n    <v-dialog v-model=\"showDeleteDialog\" max-width=\"400\">\r\n      <v-card>\r\n        <v-card-title class=\"headline\">确认删除?</v-card-title>\r\n        <v-card-text>\r\n          此操作将永久删除该模拟及其所有相关数据，无法恢复。\r\n        </v-card-text>\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn text @click=\"showDeleteDialog = false\">取消</v-btn>\r\n          <v-btn color=\"error\" text @click=\"deleteSimulation\" :loading=\"deleteLoading\">确认删除</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n    \r\n    <!-- 连接状态提示 -->\r\n    <v-snackbar\r\n      v-model=\"showConnectionStatus\"\r\n      :color=\"connectionStatusColor\"\r\n      :timeout=\"3000\"\r\n      bottom\r\n      right\r\n    >\r\n      {{ connectionStatusText }}\r\n      <template v-slot:action=\"{ attrs }\">\r\n        <v-btn\r\n          text\r\n          v-bind=\"attrs\"\r\n          @click=\"showConnectionStatus = false\"\r\n        >\r\n          关闭\r\n        </v-btn>\r\n      </template>\r\n    </v-snackbar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SimulationCanvas from '../components/SimulationCanvas.vue';\r\nimport { mapState, mapGetters } from 'vuex';\r\n\r\nexport default {\r\n  name: 'SimulationDetail',\r\n  components: {\r\n    SimulationCanvas\r\n  },\r\n  props: {\r\n    simulationId: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      simulation: {},\r\n      isRunning: false,\r\n      isCaptured: false,\r\n      socket: null,\r\n      showTrails: true,\r\n      showVisionRange: false,\r\n      showCommunicationRange: false,\r\n      showDeleteDialog: false,\r\n      deleteLoading: false,\r\n      \r\n      // 图表配置\r\n      chartInitialized: false,\r\n      chartContainerReady: false,\r\n      initializationAttempts: 0,\r\n      maxInitializationAttempts: 10,\r\n      chartInstance: null,\r\n      chartLoading: false,\r\n      \r\n      distanceChartOptions: {\r\n        chart: {\r\n          id: 'hunter-distance-chart',\r\n          type: 'line',\r\n          height: 180,\r\n          animations: {\r\n            enabled: false, // 禁用动画提高性能\r\n          },\r\n          toolbar: {\r\n            show: false\r\n          },\r\n          background: '#fff',\r\n          fontFamily: 'Roboto, sans-serif',\r\n        },\r\n        xaxis: {\r\n          type: 'numeric',\r\n          title: {\r\n            text: '步数'\r\n          },\r\n          labels: {\r\n            formatter: (val) => Math.floor(val)\r\n          }\r\n        },\r\n        yaxis: {\r\n          title: {\r\n            text: '与目标距离'\r\n          },\r\n          min: function(min) {\r\n            return min ? min * 0.9 : 0; // 最小值向下扩展10%\r\n          }\r\n        },\r\n        colors: ['#3f51b5', '#673ab7', '#e91e63', '#ff9800', '#4caf50', '#03a9f4', '#8bc34a', '#9c27b0', '#795548', '#607d8b'],\r\n        stroke: {\r\n          width: 2,\r\n          curve: 'smooth',\r\n          lineCap: 'round'\r\n        },\r\n        markers: {\r\n          size: 0, // 隐藏点标记提高性能\r\n          hover: {\r\n            size: 5\r\n          }\r\n        },\r\n        tooltip: {\r\n          x: {\r\n            title: {\r\n              formatter: () => '步数'\r\n            }\r\n          },\r\n          y: {\r\n            formatter: (val) => `${val.toFixed(2)} 单位`\r\n          }\r\n        },\r\n        grid: {\r\n          padding: {\r\n            left: 10,\r\n            right: 10\r\n          }\r\n        },\r\n        legend: {\r\n          position: 'top',\r\n          horizontalAlign: 'center'\r\n        },\r\n        responsive: [{\r\n          breakpoint: 768,\r\n          options: {\r\n            chart: {\r\n              height: 200\r\n            },\r\n            legend: {\r\n              position: 'bottom'\r\n            }\r\n          }\r\n        }]\r\n      },\r\n      distanceChartSeries: [],\r\n      agentDistances: {},\r\n      \r\n      // WebSocket相关状态\r\n      wsConnectionAttempts: 0,\r\n      wsMaxConnectionAttempts: 5,\r\n      wsReconnectDelay: 2000,\r\n      heartbeatInterval: null,\r\n      heartbeatTimeout: null,\r\n      lastMessageTime: 0,\r\n      wsLatency: 0,\r\n      \r\n      // 连接状态提示\r\n      showConnectionStatus: false,\r\n      connectionStatusText: '',\r\n      connectionStatusColor: 'info',\r\n      \r\n      // 性能监控\r\n      renderTime: 0,\r\n      lastRenderTimestamp: 0,\r\n      \r\n      // 数据处理相关\r\n      dataUpdateTimer: null,\r\n      chartUpdateTimer: null,\r\n      maxDataPoints: 100, // 限制图表数据点数量\r\n      lastChartUpdate: 0,\r\n      optimizeChartUpdates: true,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      storeCurrentSimulation: state => state.currentSimulation,\r\n      simulationsLoading: state => state.loading\r\n    }),\r\n    ...mapGetters([\r\n      'getSimulationById'\r\n    ]),\r\n    statusChipColor() {\r\n      if (this.isCaptured) return 'success';\r\n      if (this.isRunning) return 'primary';\r\n      return 'grey';\r\n    },\r\n    statusChipText() {\r\n      if (this.isCaptured) return '已捕获';\r\n      if (this.isRunning) return '进行中';\r\n      return '已停止';\r\n    },\r\n    hasWebSocket() {\r\n      return !!this.socket && this.socket.readyState === WebSocket.OPEN;\r\n    }\r\n  },\r\n  created() {\r\n    // 注册错误处理事件监听\r\n    this.$root.$on('api-error', this.handleApiError);\r\n  },\r\n  mounted() {\r\n    console.log('SimulationDetail mounted');\r\n    // 监听页面可见性变化\r\n    document.addEventListener('visibilitychange', this.handleVisibilityChange);\r\n    \r\n    // 监听窗口焦点变化\r\n    window.addEventListener('focus', this.handleWindowFocus);\r\n    window.addEventListener('blur', this.handleWindowBlur);\r\n    \r\n    // 初始化组件\r\n    this.initializeComponent();\r\n  },\r\n  updated() {\r\n    // 在组件更新后检查图表初始化\r\n    if (!this.chartInitialized && \r\n        this.simulation.hunters && \r\n        this.simulation.hunters.length) {\r\n      console.log('组件已更新，尝试初始化图表');\r\n      this.$nextTick(() => {\r\n        this.checkChartContainerAndInitialize();\r\n      });\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    console.log('SimulationDetail beforeDestroy');\r\n    // 清理WebSocket连接\r\n    this.closeWebSocket();\r\n    \r\n    // 清理定时器\r\n    this.cleanupTimers();\r\n    \r\n    // 清理图表实例\r\n    if (this.chartInstance) {\r\n      try {\r\n        this.chartInstance.destroy();\r\n        this.chartInstance = null;\r\n      } catch (e) {\r\n        console.error('销毁图表实例时出错:', e);\r\n      }\r\n    }\r\n    \r\n    // 移除事件监听\r\n    this.$root.$off('api-error', this.handleApiError);\r\n    document.removeEventListener('visibilitychange', this.handleVisibilityChange);\r\n    window.removeEventListener('focus', this.handleWindowFocus);\r\n    window.removeEventListener('blur', this.handleWindowBlur);\r\n  },\r\n  methods: {\r\n    async initializeComponent() {\r\n      console.log('初始化组件...');\r\n      try {\r\n        // 从API获取模拟数据\r\n        await this.fetchSimulation();\r\n        console.log('模拟数据获取成功:', this.simulation.id);\r\n        \r\n        // 设置WebSocket连接\r\n        this.setupWebSocket();\r\n        \r\n        // 尝试初始化图表 (使用延迟确保DOM已渲染)\r\n        setTimeout(() => {\r\n          console.log('尝试初始化图表...');\r\n          this.checkChartContainerAndInitialize();\r\n        }, 500);\r\n      } catch (error) {\r\n        console.error('初始化组件失败:', error);\r\n        this.showErrorStatus('初始化失败，请刷新页面重试');\r\n      }\r\n    },\r\n    \r\n    // 获取模拟数据\r\n    async fetchSimulation() {\r\n      try {\r\n        console.log('获取模拟数据, ID:', this.simulationId);\r\n        // 尝试从store获取数据\r\n        let storeSimulation = this.getSimulationById(this.simulationId);\r\n        \r\n        // 如果store中没有数据，从API获取\r\n        if (!storeSimulation) {\r\n          console.log('从API获取模拟数据');\r\n          const response = await this.$store.dispatch('fetchSimulation', this.simulationId);\r\n          this.simulation = response;\r\n        } else {\r\n          console.log('从Store获取模拟数据');\r\n          this.simulation = storeSimulation;\r\n        }\r\n        \r\n        // 更新状态\r\n        this.isRunning = this.simulation.is_running;\r\n        this.isCaptured = this.simulation.is_captured;\r\n        \r\n        console.log('模拟数据获取完成:', this.simulation.name);\r\n        return this.simulation;\r\n      } catch (error) {\r\n        console.error('获取模拟数据失败:', error);\r\n        this.$toast.error('获取模拟数据失败');\r\n        throw error;\r\n      }\r\n    },\r\n    \r\n    // 检查图表容器并初始化\r\n    checkChartContainerAndInitialize() {\r\n      // 增加尝试次数\r\n      this.initializationAttempts++;\r\n      \r\n      console.log(`图表初始化尝试 ${this.initializationAttempts}/${this.maxInitializationAttempts}`);\r\n      console.log('DOM容器状态:', this.$refs.chartContainer ? '存在' : '不存在');\r\n      console.log('猎手数据状态:', this.simulation.hunters && this.simulation.hunters.length ? '已加载' : '未加载');\r\n      \r\n      // 检查DOM元素和数据是否存在\r\n      if (this.$refs.chartContainer && this.simulation.hunters && this.simulation.hunters.length) {\r\n        console.log('DOM容器和数据已准备就绪，初始化图表');\r\n        this.chartContainerReady = true;\r\n        this.initDistanceChart();\r\n        return true;\r\n      } else {\r\n        // 如果达到最大尝试次数，放弃初始化\r\n        if (this.initializationAttempts >= this.maxInitializationAttempts) {\r\n          console.warn('达到最大初始化尝试次数，放弃初始化图表');\r\n          return false;\r\n        }\r\n        \r\n        // 递增延迟时间，从500ms开始，最长到2500ms\r\n        const delay = Math.min(500 * Math.pow(1.5, this.initializationAttempts - 1), 2500);\r\n        console.log(`将在 ${delay}ms 后重试初始化图表`);\r\n        \r\n        setTimeout(() => this.checkChartContainerAndInitialize(), delay);\r\n        return false;\r\n      }\r\n    },\r\n    \r\n    // 初始化图表\r\n    initDistanceChart() {\r\n      try {\r\n        console.log('开始初始化图表');\r\n        this.chartLoading = true;\r\n        \r\n        // 清空旧数据\r\n        this.distanceChartSeries = [];\r\n        this.agentDistances = {};\r\n        \r\n        // 为每个猎手创建数据系列\r\n        if (this.simulation.hunters && this.simulation.hunters.length > 0) {\r\n          console.log(`创建 ${this.simulation.hunters.length} 个猎手的数据系列`);\r\n          \r\n          this.distanceChartSeries = this.simulation.hunters.map(hunter => ({\r\n            name: `猎手 ${hunter.id}`,\r\n            data: []\r\n          }));\r\n          \r\n          this.simulation.hunters.forEach(hunter => {\r\n            this.agentDistances[hunter.id] = [];\r\n          });\r\n          \r\n          // 使用nextTick确保DOM已更新\r\n          this.$nextTick(() => {\r\n            setTimeout(() => {\r\n              try {\r\n                // 确保没有现有图表实例\r\n                if (this.chartInstance) {\r\n                  this.chartInstance.destroy();\r\n                  this.chartInstance = null;\r\n                }\r\n                \r\n                // 确保容器存在\r\n                const container = document.getElementById('hunter-distance-chart');\r\n                if (!container) {\r\n                  console.error('找不到图表容器元素');\r\n                  return;\r\n                }\r\n                \r\n                // 使用普通方式创建图表而不是Vue组件\r\n                import('apexcharts').then(ApexCharts => {\r\n                  this.chartInstance = new ApexCharts.default(\r\n                    container,\r\n                    {\r\n                      ...this.distanceChartOptions,\r\n                      series: this.distanceChartSeries\r\n                    }\r\n                  );\r\n                  \r\n                  this.chartInstance.render().then(() => {\r\n                    console.log('图表渲染成功');\r\n                    this.chartInitialized = true;\r\n                    this.chartLoading = false;\r\n                  }).catch(err => {\r\n                    console.error('图表渲染失败:', err);\r\n                    this.chartLoading = false;\r\n                  });\r\n                }).catch(err => {\r\n                  console.error('加载ApexCharts库失败:', err);\r\n                  this.chartLoading = false;\r\n                });\r\n              } catch (error) {\r\n                console.error('创建图表实例失败:', error);\r\n                this.chartLoading = false;\r\n              }\r\n            }, 500); // 延迟500ms确保DOM完全就绪\r\n          });\r\n        } else {\r\n          console.warn('没有猎手数据，跳过图表初始化');\r\n          this.chartLoading = false;\r\n        }\r\n      } catch (error) {\r\n        console.error('图表初始化主流程失败:', error);\r\n        this.chartLoading = false;\r\n        this.chartInitialized = false;\r\n      }\r\n    },\r\n    \r\n    // WebSocket连接管理\r\n    setupWebSocket() {\r\n      // 关闭之前的连接\r\n      this.closeWebSocket();\r\n      \r\n      // 添加连接状态跟踪\r\n      this.wsConnectionAttempts = 0;\r\n      this.wsMaxConnectionAttempts = 5;\r\n      this.wsReconnectDelay = 2000; // 初始重连延迟（毫秒）\r\n      \r\n      // 创建新的WebSocket连接\r\n      const wsProtocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\r\n      const wsBaseUrl = `${wsProtocol}//localhost:8000`;\r\n      const wsUrl = `${wsBaseUrl}/api/v1/ws/simulations/${this.simulationId}`;\r\n      \r\n      console.log(`连接WebSocket: ${wsUrl}`);\r\n      this.socket = new WebSocket(wsUrl);\r\n      \r\n      this.socket.onopen = () => {\r\n        console.log(`WebSocket连接已建立 (simulationId: ${this.simulationId})`);\r\n        // 重置重连计数器\r\n        this.wsConnectionAttempts = 0;\r\n        this.wsReconnectDelay = 2000;\r\n        // 显示连接成功提示\r\n        this.showSuccessStatus('WebSocket连接已建立');\r\n        // 添加心跳检测\r\n        this.startHeartbeat();\r\n      };\r\n      \r\n      this.socket.onmessage = (event) => {\r\n        // 计算延迟\r\n        this.calculateWsLatency();\r\n        \r\n        try {\r\n          const data = JSON.parse(event.data);\r\n          if (data.error) {\r\n            console.error('WebSocket错误:', data.error);\r\n            this.$toast.error(`WebSocket错误: ${data.error}`);\r\n            return;\r\n          }\r\n          \r\n          // 使用防抖更新数据，避免频繁更新\r\n          this.updateSimulationDataDebounced(data);\r\n          \r\n          // 如果是心跳响应，重置超时计时器\r\n          if (data.heartbeat) {\r\n            this.resetHeartbeatTimeout();\r\n          }\r\n        } catch (error) {\r\n          console.error('解析WebSocket消息失败:', error);\r\n        }\r\n      };\r\n      \r\n      this.socket.onclose = (event) => {\r\n        console.log(`WebSocket连接已关闭 (code: ${event.code}, reason: ${event.reason})`);\r\n        // 清理心跳计时器\r\n        this.stopHeartbeat();\r\n        \r\n        // 如果是正常关闭，不显示错误\r\n        if (event.code === 1000 || event.code === 1001) {\r\n          return;\r\n        }\r\n        \r\n        // 显示连接关闭提示\r\n        this.showWarningStatus('WebSocket连接已关闭');\r\n        \r\n        // 如果模拟仍在运行但连接关闭，尝试重新连接\r\n        if ((this.isRunning && !this.isCaptured) && \r\n            this.wsConnectionAttempts < this.wsMaxConnectionAttempts) {\r\n          // 指数退避重连策略\r\n          this.wsConnectionAttempts++;\r\n          const delay = Math.min(this.wsReconnectDelay * Math.pow(1.5, this.wsConnectionAttempts-1), 30000);\r\n          \r\n          console.log(`尝试重新连接WebSocket... (${this.wsConnectionAttempts}/${this.wsMaxConnectionAttempts}) 延迟: ${delay}ms`);\r\n          this.showInfoStatus(`正在重新连接... (${this.wsConnectionAttempts}/${this.wsMaxConnectionAttempts})`);\r\n          \r\n          setTimeout(() => this.setupWebSocket(), delay);\r\n        } else if (this.wsConnectionAttempts >= this.wsMaxConnectionAttempts) {\r\n          console.error('达到最大重连次数，停止尝试');\r\n          this.showErrorStatus('WebSocket连接失败，请刷新页面重试');\r\n        }\r\n      };\r\n      \r\n      this.socket.onerror = (error) => {\r\n        console.error('WebSocket错误:', error);\r\n        this.showErrorStatus('WebSocket连接错误');\r\n      };\r\n    },\r\n    \r\n    // 关闭WebSocket连接\r\n    closeWebSocket() {\r\n      this.stopHeartbeat();\r\n      \r\n      if (this.socket) {\r\n        // 移除所有事件监听器\r\n        this.socket.onopen = null;\r\n        this.socket.onmessage = null;\r\n        this.socket.onclose = null;\r\n        this.socket.onerror = null;\r\n        \r\n        // 关闭连接\r\n        if (this.socket.readyState === WebSocket.OPEN || \r\n            this.socket.readyState === WebSocket.CONNECTING) {\r\n          this.socket.close();\r\n        }\r\n        this.socket = null;\r\n      }\r\n    },\r\n    \r\n    // 开始发送心跳\r\n    startHeartbeat() {\r\n      this.heartbeatInterval = setInterval(() => {\r\n        if (this.socket && this.socket.readyState === WebSocket.OPEN) {\r\n          // 发送心跳消息\r\n          this.socket.send(JSON.stringify({ type: 'heartbeat' }));\r\n          \r\n          // 设置心跳超时，如果超时没收到响应则重连\r\n          this.heartbeatTimeout = setTimeout(() => {\r\n            console.warn('心跳超时，尝试重新连接...');\r\n            this.closeWebSocket();\r\n            this.setupWebSocket();\r\n          }, 5000); // 5秒超时\r\n        }\r\n      }, 30000); // 每30秒发送一次心跳\r\n    },\r\n    \r\n    // 停止心跳\r\n    stopHeartbeat() {\r\n      if (this.heartbeatInterval) {\r\n        clearInterval(this.heartbeatInterval);\r\n        this.heartbeatInterval = null;\r\n      }\r\n      \r\n      if (this.heartbeatTimeout) {\r\n        clearTimeout(this.heartbeatTimeout);\r\n        this.heartbeatTimeout = null;\r\n      }\r\n    },\r\n    \r\n    // 重置心跳超时\r\n    resetHeartbeatTimeout() {\r\n      if (this.heartbeatTimeout) {\r\n        clearTimeout(this.heartbeatTimeout);\r\n        this.heartbeatTimeout = null;\r\n      }\r\n    },\r\n    \r\n    // 计算WebSocket延迟\r\n    calculateWsLatency() {\r\n      const now = performance.now();\r\n      if (this.lastMessageTime) {\r\n        this.wsLatency = Math.round(now - this.lastMessageTime);\r\n      }\r\n      this.lastMessageTime = now;\r\n    },\r\n    \r\n    // 防抖更新数据\r\n    updateSimulationDataDebounced(data) {\r\n      if (this.dataUpdateTimer) {\r\n        clearTimeout(this.dataUpdateTimer);\r\n      }\r\n      \r\n      this.dataUpdateTimer = setTimeout(() => {\r\n        const startTime = performance.now();\r\n        \r\n        // 更新模拟数据\r\n        this.simulation = data;\r\n        this.isRunning = data.is_running;\r\n        this.isCaptured = data.is_captured;\r\n        \r\n        // 更新Vuex存储\r\n        this.$store.dispatch('updateSimulationAgents', {\r\n          simulationId: this.simulationId,\r\n          hunters: data.hunters || [],\r\n          targets: data.targets || []\r\n        });\r\n        \r\n        // 使用nextTick确保视图更新后再更新图表\r\n        this.$nextTick(() => {\r\n          // 更新图表（使用节流）\r\n          if (this.chartInitialized && this.chartInstance) {\r\n            this.updateChartThrottled();\r\n          } else if (!this.chartInitialized && this.$refs.chartContainer) {\r\n            // 如果图表尚未初始化但DOM元素已存在，尝试初始化\r\n            this.checkChartContainerAndInitialize();\r\n          }\r\n          \r\n          // 计算渲染时间\r\n          this.renderTime = Math.round(performance.now() - startTime);\r\n        });\r\n      }, 50); // 50ms防抖延迟\r\n    },\r\n    \r\n    // 节流更新图表\r\n    updateChartThrottled() {\r\n      const now = performance.now();\r\n      const timeSinceLastUpdate = now - this.lastChartUpdate;\r\n      \r\n      // 如果数据是实时的并且距离上次更新不到200ms，延迟更新\r\n      if (this.optimizeChartUpdates && this.isRunning && timeSinceLastUpdate < 200) {\r\n        if (!this.chartUpdateTimer) {\r\n          this.chartUpdateTimer = setTimeout(() => {\r\n            this.updateDistanceChart();\r\n            this.chartUpdateTimer = null;\r\n            this.lastChartUpdate = performance.now();\r\n          }, 200 - timeSinceLastUpdate);\r\n        }\r\n      } else {\r\n        // 直接更新\r\n        if (this.chartUpdateTimer) {\r\n          clearTimeout(this.chartUpdateTimer);\r\n          this.chartUpdateTimer = null;\r\n        }\r\n        this.updateDistanceChart();\r\n        this.lastChartUpdate = now;\r\n      }\r\n    },\r\n    \r\n    // 更新图表\r\n    updateDistanceChart() {\r\n      try {\r\n        if (!this.chartInitialized || !this.chartInstance || \r\n            !this.simulation.hunters || !this.simulation.targets || \r\n            !this.simulation.targets.length) {\r\n          return;\r\n        }\r\n        \r\n        const target = this.simulation.targets[0];\r\n        if (!target || !target.position) return;\r\n        \r\n        // 更新数据\r\n        let dataUpdated = false;\r\n        \r\n        this.simulation.hunters.forEach((hunter, index) => {\r\n          // 确保猎手数据有效\r\n          if (!hunter || !hunter.position) return;\r\n          \r\n          // 计算与目标的距离\r\n          const distance = this.calculateDistance(hunter.position, target.position);\r\n          \r\n          if (!this.agentDistances[hunter.id]) {\r\n            this.agentDistances[hunter.id] = [];\r\n          }\r\n          \r\n          // 添加数据点\r\n          this.agentDistances[hunter.id].push({\r\n            x: this.simulation.step_count,\r\n            y: Math.round(distance * 100) / 100\r\n          });\r\n          \r\n          // 限制数据点数量，避免性能问题\r\n          if (this.agentDistances[hunter.id].length > this.maxDataPoints) {\r\n            // 清除旧数据点，但保留第一个点以保持连续性\r\n            const firstPoint = this.agentDistances[hunter.id][0];\r\n            this.agentDistances[hunter.id] = [\r\n              firstPoint,\r\n              ...this.agentDistances[hunter.id].slice(-this.maxDataPoints + 1)\r\n            ];\r\n          }\r\n          \r\n          // 更新系列数据\r\n          if (index < this.distanceChartSeries.length) {\r\n            this.distanceChartSeries[index].data = [...this.agentDistances[hunter.id]];\r\n            dataUpdated = true;\r\n          }\r\n        });\r\n        \r\n        // 仅当数据更新时才更新图表\r\n        if (dataUpdated && this.chartInstance) {\r\n          // 使用ApexCharts的updateSeries方法更新数据\r\n          this.chartInstance.updateSeries(this.distanceChartSeries);\r\n        }\r\n      } catch (error) {\r\n        console.error('更新图表数据失败:', error);\r\n      }\r\n    },\r\n    \r\n    // 模拟控制方法\r\n    async startSimulation() {\r\n      try {\r\n        await this.$store.dispatch('startSimulation', this.simulationId);\r\n        this.isRunning = true;\r\n        this.$toast.success('模拟已启动');\r\n      } catch (error) {\r\n        console.error('启动模拟失败:', error);\r\n        this.$toast.error('启动模拟失败');\r\n      }\r\n    },\r\n    \r\n    async stopSimulation() {\r\n      try {\r\n        await this.$store.dispatch('stopSimulation', this.simulationId);\r\n        this.isRunning = false;\r\n        this.$toast.success('模拟已停止');\r\n      } catch (error) {\r\n        console.error('停止模拟失败:', error);\r\n        this.$toast.error('停止模拟失败');\r\n      }\r\n    },\r\n    \r\n    async resetSimulation() {\r\n      try {\r\n        const data = await this.$store.dispatch('resetSimulation', this.simulationId);\r\n        this.simulation = data;\r\n        this.isRunning = false;\r\n        this.isCaptured = false;\r\n        \r\n        // 重置图表数据\r\n        this.agentDistances = {};\r\n        this.chartInitialized = false; // 标记需要重新初始化\r\n        this.initializationAttempts = 0;\r\n        \r\n        // 清理现有图表实例\r\n        if (this.chartInstance) {\r\n          try {\r\n            this.chartInstance.destroy();\r\n            this.chartInstance = null;\r\n          } catch (e) {\r\n            console.error('重置时销毁图表实例失败:', e);\r\n          }\r\n        }\r\n        \r\n        this.$nextTick(() => {\r\n          this.checkChartContainerAndInitialize();\r\n        });\r\n        \r\n        this.$toast.success('模拟已重置');\r\n      } catch (error) {\r\n        console.error('重置模拟失败:', error);\r\n        this.$toast.error('重置模拟失败');\r\n      }\r\n    },\r\n    \r\n    async deleteSimulation() {\r\n      this.deleteLoading = true;\r\n      try {\r\n        await this.$store.dispatch('deleteSimulation', this.simulationId);\r\n        this.$toast.success('模拟已删除');\r\n        this.$router.push('/simulations');\r\n      } catch (error) {\r\n        console.error('删除模拟失败:', error);\r\n        this.$toast.error('删除模拟失败');\r\n      } finally {\r\n        this.deleteLoading = false;\r\n        this.showDeleteDialog = false;\r\n      }\r\n    },\r\n    \r\n    // 辅助方法\r\n    calculateDistance(pos1, pos2) {\r\n      return Math.sqrt(\r\n        Math.pow(pos1[0] - pos2[0], 2) + \r\n        Math.pow(pos1[1] - pos2[1], 2)\r\n      );\r\n    },\r\n    \r\n    formatDate(dateString) {\r\n      if (!dateString) return '未知';\r\n      const date = new Date(dateString);\r\n      return date.toLocaleString();\r\n    },\r\n    \r\n    formatAlgorithm(algorithm) {\r\n      const map = {\r\n        'APF': '人工势场法',\r\n        'CONSENSUS': '共识算法'\r\n      };\r\n      return map[algorithm] || algorithm;\r\n    },\r\n    \r\n    // 导航方法\r\n    navigateToList() {\r\n      // 清理资源后再导航\r\n      this.closeWebSocket();\r\n      this.cleanupTimers();\r\n      this.$router.push('/simulations');\r\n    },\r\n    \r\n    // 状态提示显示方法\r\n    showInfoStatus(message) {\r\n      this.connectionStatusText = message;\r\n      this.connectionStatusColor = 'info';\r\n      this.showConnectionStatus = true;\r\n    },\r\n    \r\n    showSuccessStatus(message) {\r\n      this.connectionStatusText = message;\r\n      this.connectionStatusColor = 'success';\r\n      this.showConnectionStatus = true;\r\n    },\r\n    \r\n    showWarningStatus(message) {\r\n      this.connectionStatusText = message;\r\n      this.connectionStatusColor = 'warning';\r\n      this.showConnectionStatus = true;\r\n    },\r\n    \r\n    showErrorStatus(message) {\r\n      this.connectionStatusText = message;\r\n      this.connectionStatusColor = 'error';\r\n      this.showConnectionStatus = true;\r\n    },\r\n    \r\n    // 错误处理\r\n    handleApiError(error) {\r\n      console.error('API错误:', error);\r\n      \r\n      // 特定错误处理\r\n      if (error.status === 404 && error.message.includes('Simulation not found')) {\r\n        this.$toast.error('模拟不存在或已被删除');\r\n        this.$router.push('/simulations');\r\n      }\r\n    },\r\n    \r\n    // 页面可见性处理\r\n    handleVisibilityChange() {\r\n      if (document.hidden) {\r\n        // 页面隐藏时暂停WebSocket\r\n        this.stopHeartbeat();\r\n      } else {\r\n        // 页面可见时恢复WebSocket\r\n        if (this.socket && this.socket.readyState === WebSocket.OPEN) {\r\n          this.startHeartbeat();\r\n        } else if (this.isRunning && !this.isCaptured) {\r\n          // 如果模拟正在运行，但WebSocket关闭，则重新连接\r\n          this.setupWebSocket();\r\n        }\r\n      }\r\n    },\r\n    \r\n    // 窗口焦点变化处理\r\n    handleWindowFocus() {\r\n      if (this.isRunning && !this.isCaptured) {\r\n        // 如果模拟正在运行，确保WebSocket连接正常\r\n        if (!this.socket || this.socket.readyState !== WebSocket.OPEN) {\r\n          this.setupWebSocket();\r\n        }\r\n      }\r\n    },\r\n    \r\n    handleWindowBlur() {\r\n      // 窗口失去焦点时的处理（如果需要）\r\n      // 可以降低更新频率等\r\n      this.optimizeChartUpdates = true;\r\n    },\r\n    \r\n    // 清理定时器\r\n    cleanupTimers() {\r\n      if (this.dataUpdateTimer) {\r\n        clearTimeout(this.dataUpdateTimer);\r\n        this.dataUpdateTimer = null;\r\n      }\r\n      \r\n      if (this.chartUpdateTimer) {\r\n        clearTimeout(this.chartUpdateTimer);\r\n        this.chartUpdateTimer = null;\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    simulationId: {\r\n      handler(newId, oldId) {\r\n        if (newId !== oldId) {\r\n          console.log(`模拟ID变更: ${oldId} -> ${newId}`);\r\n          // 重新初始化组件\r\n          this.closeWebSocket();\r\n          this.cleanupTimers();\r\n          this.chartInitialized = false;\r\n          this.initializationAttempts = 0;\r\n          \r\n          // 清理现有图表实例\r\n          if (this.chartInstance) {\r\n            try {\r\n              this.chartInstance.destroy();\r\n              this.chartInstance = null;\r\n            } catch (e) {\r\n              console.error('ID变更时销毁图表实例失败:', e);\r\n            }\r\n          }\r\n          \r\n          this.initializeComponent();\r\n        }\r\n      },\r\n      immediate: false\r\n    },\r\n    \r\n    // 监视store中的当前模拟数据变化\r\n    storeCurrentSimulation: {\r\n      handler(newSimulation) {\r\n        if (newSimulation && newSimulation.id === this.simulationId) {\r\n          // 仅在首次加载或重要属性变化时更新本地数据\r\n          if (!this.simulation.id || \r\n              newSimulation.is_running !== this.simulation.is_running ||\r\n              newSimulation.is_captured !== this.simulation.is_captured) {\r\n            this.simulation = newSimulation;\r\n            this.isRunning = newSimulation.is_running;\r\n            this.isCaptured = newSimulation.is_captured;\r\n          }\r\n        }\r\n      },\r\n      deep: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* 改进整体布局容器 */\r\n.simulation-detail {\r\n  padding-top: 8px;\r\n  height: auto;\r\n  min-height: calc(100vh - 120px);\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* 使主内容区域更灵活 */\r\n.v-card-text {\r\n  position: relative;\r\n  overflow: visible;\r\n}\r\n\r\n/* 调整图表容器尺寸和定位 */\r\n.chart-container {\r\n  width: 100%;\r\n  height: 220px; /* 减小高度 */\r\n  min-height: 180px; /* 允许更小的最小高度 */\r\n  margin-bottom: 12px;\r\n}\r\n\r\n/* 确保内容区域不会溢出 */\r\n.v-row, .v-col {\r\n  margin: 0;\r\n  padding: 4px;\r\n}\r\n\r\n/* 提高响应式布局的灵活性 */\r\n@media (max-width: 1280px) {\r\n  /* 在中等屏幕上调整列布局 */\r\n  .v-col-md-8 {\r\n    flex: 0 0 100%;\r\n    max-width: 100%;\r\n  }\r\n  \r\n  .v-col-md-4 {\r\n    flex: 0 0 100%;\r\n    max-width: 100%;\r\n  }\r\n  \r\n  /* 减小内容间距 */\r\n  .v-card {\r\n    margin-bottom: 8px;\r\n  }\r\n}\r\n\r\n/* 优化小屏幕布局 */\r\n@media (max-height: 768px) {\r\n  .chart-container {\r\n    height: 180px;\r\n  }\r\n  \r\n  .v-card-title {\r\n    padding: 8px 16px;\r\n    font-size: 1rem;\r\n  }\r\n  \r\n  .v-card-text {\r\n    padding: 8px;\r\n  }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}